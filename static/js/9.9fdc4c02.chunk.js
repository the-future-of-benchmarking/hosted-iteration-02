(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[9],{128:function(e,t,a){e.exports=a.p+"static/media/scale.9df64ced.jpeg"},144:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),s=a(7),c=a(5),l=a(6),o=a(34),i=a(25),u=a(24),m=a(0),d=a.n(m),p=a(58),h=a(20),b=a(55),E=a(111),v=a(113),f=a(112),g=a(37),w=a.n(g),C=a(56),N=a(35),k=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).addContract=function(){var e=Object(s.a)(r.a.mark((function e(t){var a,s,c,l,o,i,u,m,d,p,h,b,E,v,f,g,k;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w.a.utils.isAddress(t)){e.next=5;break}n.props.showError("Konnte nicht hinzugef\xfcgt werden - Addresse nicht valide"),n.setState({contractInput:""}),e.next=45;break;case 5:return e.prev=5,a=new C.a(n.props.web3,t),e.next=9,N.a.getItem(t);case 9:if(e.sent){e.next=25;break}return e.next=12,a.getDetails();case 12:return s=e.sent,c=s.name,l=s.description,o=s.entries,i=s.sum,u=s.upper_bound,m=s.lower_bound,d=s.unit,e.next=22,N.a.addItem({name:c,description:l,entries:o,sum:i,upper_bound:u,lower_bound:m,unit:d,address:t});case 22:n.setState({contractInput:""}),e.next=39;break;case 25:return e.next=27,a.getDetails();case 27:return p=e.sent,h=p.name,b=p.description,E=p.entries,v=p.sum,f=p.upper_bound,g=p.lower_bound,k=p.unit,e.next=37,N.a.updateItem({name:h,description:b,entries:E,sum:v,upper_bound:f,lower_bound:g,unit:k,address:t});case 37:n.setState({contractInput:""}),window.location.reload();case 39:e.next=45;break;case 41:e.prev=41,e.t0=e.catch(5),n.props.showError("Adresse konnte nicht gefunden werden"),n.setState({contractInput:""});case 45:case"end":return e.stop()}}),e,null,[[5,41]])})));return function(t){return e.apply(this,arguments)}}(),n.state={contractInput:""},n.factory=new C.b(e.web3),n.addContract=n.addContract.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:"p-inputgroup p-mt-5"},d.a.createElement(E.Button,{label:"Add",onClick:function(){return e.addContract(e.state.contractInput)}}),d.a.createElement("span",{className:"p-float-label"},d.a.createElement(v.InputText,{id:"contract",value:this.state.contractInput,onChange:function(t){return e.setState({contractInput:t.target.value})}}),d.a.createElement("label",{htmlFor:"contract"},"Contract")))}}]),a}(m.Component),O=function(e){var t=e.loadBenchmark,a=e.smartContractAddress,n=e.web3,c=e.showError,l=Object(m.useState)(!0),o=Object(h.a)(l,2),i=o[0],u=o[1],p=Object(m.useState)([]),v=Object(h.a)(p,2),g=v[0],w=v[1],C=function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.purge();case 2:w([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(s.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(a);case 2:u(!i);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.useEffect)((function(){N.a.getAll().then((function(e){w(e)}))}),[]),d.a.createElement(b.Card,{title:"Gespeicherte Smart Contracts",className:"p-mb-4 p-mt-4"},d.a.createElement("div",{className:"p-mb-4"},i?d.a.createElement("i",{className:"pi pi-angle-up",onClick:function(){return u(!i)},style:{cursor:"pointer"}}):d.a.createElement("i",{className:"pi pi-angle-down",onClick:function(){return u(!i)},style:{cursor:"pointer"}})),i?d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"p-grid p-dir-col"},0===g.length?"No entries (add existing contracts via the form below or create one)":g&&g.map((function(e){return d.a.createElement("div",{className:"p-col",style:{cursor:"pointer"},key:e.address,onClick:function(){return O(e.address)}},d.a.createElement(f.Chip,{template:d.a.createElement(d.a.Fragment,null,e.name," - ",e.address),style:{backgroundColor:a===e.address?"#00BCD4":"",color:a===e.address?"white":""}}))}))),d.a.createElement(k,{loadBenchmark:t,smartContractAddress:a,web3:n,showError:c}),d.a.createElement(E.Button,{label:"Delete",icon:"pi pi-trash",className:"p-button-danger p-mt-3",onClick:function(){return C()}})):"")},j=a(121),y=function(e){var t=e.smartContractAddress,a=(e.showError,e.details,Object(m.useState)(null)),n=Object(h.a)(a,2),r=n[0],s=n[1],c=Object(m.useState)(!0),l=Object(h.a)(c,2),o=l[0],i=l[1];return N.a.getItem(t).then((function(e){return s(e)})),r?d.a.createElement(b.Card,{title:"Benchmark Informationen",className:"p-mb-4 p-mt-4"},d.a.createElement("div",{className:"p-mb-4"},o?d.a.createElement("i",{className:"pi pi-angle-up",onClick:function(){return i(!o)},style:{cursor:"pointer"}}):d.a.createElement("i",{className:"pi pi-angle-down",onClick:function(){return i(!o)},style:{cursor:"pointer"}})),o?d.a.createElement("div",{className:"p-grid"},t?d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"p-col-4"},d.a.createElement("p",null,"Smart Contract Name")),d.a.createElement("div",{className:"p-col-8"},r.name?d.a.createElement("p",null,r.name):d.a.createElement("p",null,"Nicht gesetzt")),d.a.createElement("div",{className:"p-col-4"},d.a.createElement("p",null,"Smart Contract Beschreibung")),d.a.createElement("div",{className:"p-col-8"},r.description?d.a.createElement("p",null,r.description):d.a.createElement("p",null,"Nicht gesetzt")),d.a.createElement("div",{className:"p-col-4"},d.a.createElement("p",null,"Smart Contract Adresse")),d.a.createElement("div",{className:"p-col-8"},t?d.a.createElement(f.Chip,{template:t}):d.a.createElement("p",null,'"Nicht gesetzt"')),d.a.createElement("div",{className:"p-col-4"},d.a.createElement("p",null,"Einheit")),d.a.createElement("div",{className:"p-col-8"},r.unit?d.a.createElement(f.Chip,{template:r.unit}):d.a.createElement("p",null,'"Keine Einheit gesetzt"')),d.a.createElement("div",{className:"p-col-4"},d.a.createElement("p",null,"Grenzen")),r.lower_bound&&r.upper_bound?d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"p-col-4"},d.a.createElement(j.Knob,{value:r.lower_bound,min:r.lower_bound>=0?r.lower_bound:0,max:r.lower_bound<0?0:r.upper_bound,readOnly:!0,showValue:r.upper_bound.toString().length<5&&r.lower_bound.toString().length<5}),r.upper_bound.toString().length>5||r.lower_bound.toString().length>5?r.lower_bound.toLocaleString("de-DE"):"","\xa0",d.a.createElement("p",null,"Mindestwert")),d.a.createElement("div",{className:"p-col-4"},d.a.createElement(j.Knob,{value:r.upper_bound,min:r.lower_bound>=0?r.lower_bound:0,max:r.upper_bound,readOnly:!0,showValue:r.upper_bound.toString().length<5&&r.lower_bound.toString().length<5}),r.upper_bound.toString().length>5||r.lower_bound.toString().length>5?r.upper_bound.toLocaleString("de-DE"):"","\xa0",d.a.createElement("p",null,"Maximalwert"))):d.a.createElement("div",{className:"p-col-8"},d.a.createElement("p",null,"Nicht gesetzt"))):d.a.createElement("div",{className:"p-col-12"},"SmartContract nicht geladen, bitte oben selektieren")):""):d.a.createElement("p",null,"Loading...")},x=a(22),I=a(115),S=a(124),A=a(126),_=a(44),R=a(128),D=a.n(R),B=function(e){var t=e.average,a=e.unit,n=e.participants,r=e.entry,s=e.bestInClass,c=e.ratingValue,l=d.a.createElement("p",null,"\u2205 ",t," ",a),o=d.a.createElement("p",null,"Eigener Eintrag (lokal zwischengespeichert): ",r),i=d.a.createElement("p",null,"Differenz: ",r>t?"+":"-"," ",Math.abs(t-r)),u=d.a.createElement(d.a.Fragment,null,d.a.createElement(S.Rating,{value:c,readOnly:!0,cancel:!1,stars:5}),"\xa0(Gemessen am Durchschnitt)"),m=d.a.createElement(d.a.Fragment,null,d.a.createElement(S.Rating,{value:s,readOnly:!0,cancel:!1,stars:5}),"\xa0(Gemessen am besten Wert)"),p=d.a.createElement("p",null,"Teilnehmende: ",n);return d.a.createElement(b.Card,{title:"Benchmark Resultate",className:"p-mt-2"},d.a.createElement("div",{className:"p-grid"},d.a.createElement("div",{className:"p-col-5"},d.a.createElement("img",{src:D.a,alt:"Skala"})),d.a.createElement("div",{className:"p-col-7"},d.a.createElement("div",{className:"p-grid p-dir-col"},d.a.createElement("div",{className:"p-col"},d.a.createElement(f.Chip,{template:p})),d.a.createElement("div",{className:"p-col"},d.a.createElement(f.Chip,{template:u})),d.a.createElement("div",{className:"p-col"},d.a.createElement(f.Chip,{template:m})),d.a.createElement("div",{className:"p-col"},d.a.createElement(f.Chip,{template:l})," "),d.a.createElement("div",{className:"p-col"},d.a.createElement(f.Chip,{template:o})," "),d.a.createElement("div",{className:"p-col"},d.a.createElement(f.Chip,{style:{backgroundColor:r>t/n?"#4caf50":"#F57C00",color:"#ffffff"},template:i})," ")))))},M=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).showInfo=function(e){n.toast.current.show({severity:"info",summary:"Info",detail:e,life:5e3})},n.requestResults=Object(s.a)(r.a.mark((function e(){var t,a,s,c,l,o,i,u,m,d,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.client.getDetails(!0);case 3:return t=e.sent,e.next=6,N.a.getItem(n.props.smartContractAddress);case 6:return a=e.sent,e.next=9,n.client.getResults(a.contribution);case 9:return s=e.sent,c=s.best,l=s.average,o=s.averageRated,e.next=15,N.a.getItem(n.props.smartContractAddress);case 15:return i=e.sent,u=i.actualized,m=i.unit,d=i.contribution,n.setState({best:c,average:l,averageRated:o,lastRefresh:u,errorMessage:"",unit:m,participants:t.entries,entry:d}),e.next=22,N.a.updateItem(Object(x.a)({best:c,average:l,averageRated:o},t));case 22:e.next=30;break;case 24:e.prev=24,e.t0=e.catch(0),p=C.a.decodeErrorMessage(e.t0),console.error(p),n.setState({errorMessage:p}),p.includes("Not enough people have participated")?n.setState({errorMessage:"Keine Ergebnisse - Nicht gen\xfcgend Teilnehmer"}):n.setState({errorMessage:p});case 30:case"end":return e.stop()}}),e,null,[[0,24]])}))),n.state={best:null,average:null,averageRated:null,lastRefresh:null},n.client=new C.a(n.props.web3,n.props.smartContractAddress),n.requestResults=n.requestResults.bind(Object(o.a)(n)),n.toast=d.a.createRef(),n.showInfo=n.showInfo.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;N.a.getItem(this.props.smartContractAddress).then((function(t){var a=t.actualized;return e.setState({lastRefresh:a})})),this.eventEmitter=this.client.getEmitter(),this.eventEmitter.on("data",(function(t){e.requestResults(),e.showInfo("New Results available")}))}},{key:"componentWillUnmount",value:function(){this.eventEmitter=null}},{key:"render",value:function(){var e=this;return d.a.createElement(b.Card,{title:"Ergebnisse",subTitle:"Letzte Aktualisierung: "+_.DateTime.fromISO(this.state.lastRefresh).toLocaleString(_.DateTime.DATETIME_MED)},d.a.createElement(p.Toast,{ref:this.toast}),this.state.errorMessage?d.a.createElement(A.Message,{severity:"error",text:this.state.errorMessage,className:"p-mb-3"}):"",d.a.createElement(E.Button,{label:"Ergebnisse laden",onClick:function(){return e.requestResults()}}),this.state.best&&this.state.average&&this.state.averageRated&&!this.state.errorMessage&&d.a.createElement(B,{average:this.state.average,unit:this.state.unit,participants:this.state.participants,entry:this.state.entry,bestInClass:this.state.best,ratingValue:this.state.averageRated}))}}]),a}(m.Component),z=function(e){var t=e.smartContractAddress,a=e.showError,n=e.web3,c=Object(m.useState)(0),l=Object(h.a)(c,2),o=l[0],i=l[1],u=Object(m.useState)(null),p=Object(h.a)(u,2),v=p[0],f=p[1];Object(m.useEffect)((function(){N.a.getItem(t).then((function(e){return f(e)}))}),[t]);var g=function(){var e=Object(s.a)(r.a.mark((function e(s,c){var l,o,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l=new C.a(n,s),e.next=4,l.participate(c);case 4:return e.next=6,l.getDetails();case 6:return o=e.sent,e.next=9,N.a.updateItem(Object(x.a)(Object(x.a)({},o),{},{contribution:c}));case 9:return e.next=11,N.a.getItem(t);case 11:i=e.sent,f(i),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),a(C.a.decodeErrorMessage(e.t0));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,a){return e.apply(this,arguments)}}();return v?d.a.createElement("div",{className:"p-fluid p-grid, p-formgrid"},d.a.createElement(b.Card,{title:"Benchmark Teilnahme",className:""},d.a.createElement("div",{className:"p-field p-col-12"},d.a.createElement("div",{className:"p-inputgroup"},d.a.createElement(E.Button,{label:"Contribute",onClick:function(){return"number"===typeof v.contribution?"":g(t,o)},disabled:"number"===typeof v.contribution}),d.a.createElement("span",{className:"p-float-label"},"number"!==typeof v.contribution?d.a.createElement(I.InputNumber,{id:"input",value:o,onChange:function(e){return i(e.value)},mode:"decimal",locale:"de-DE",minFractionDigits:2,min:+v.lower_bound,max:+v.upper_bound}):d.a.createElement(I.InputNumber,{value:v.contribution,mode:"decimal",locale:"de-DE",disabled:!0}),d.a.createElement("label",{htmlFor:"input"},"Benchmark Input ",v.unit?"(in ".concat(v.unit," )"):""))))),d.a.createElement("div",{className:"p-col-12"},"number"===typeof v.contribution?d.a.createElement(M,{smartContractAddress:t,smartContractParticipants:v.participants,smartContractResult:v.result,smartContractUnit:v.unit,smartContractEntry:v.contribution,bestInClass:v.bestInClass,ratingValue:v.rating,web3:n}):"")):d.a.createElement("p",null,"Loading...")},F=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).showError=function(e){n.toast.current.show({severity:"error",summary:"Fehler",detail:e,life:5e3})},n.showInfo=function(e){n.toast.current.show({severity:"info",summary:"Info",detail:e,life:5e3})},n.state={smartContractAddress:null,smartContractInterface:null},n.loadBenchmark=n.loadBenchmark.bind(Object(o.a)(n)),n.toast=d.a.createRef(),n.validateAddress=n.validateAddress.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"validateAddress",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!!this.props.web3.utils.isAddress(e)||(t&&this.showError("Adresse ist nicht valid!"),!1)}},{key:"loadBenchmark",value:function(){var e=Object(s.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.validateAddress(t)){e.next=13;break}return e.prev=1,a=new C.a(this.props.web3,t),e.next=5,a.getDetails();case 5:(n=e.sent)&&this.setState({smartContractAddress:t,smartContractDetails:n}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),this.showError(e.t0.message);case 13:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return d.a.createElement("div",{className:"p-grid"},d.a.createElement("div",{className:"p-col-5"},d.a.createElement(p.Toast,{ref:this.toast}),d.a.createElement(O,{loadBenchmark:this.loadBenchmark,smartContractAddress:this.state.smartContractAddress,showError:this.showError,web3:this.props.web3}),this.state.smartContractAddress?d.a.createElement(y,{smartContractAddress:this.state.smartContractAddress,details:this.state.smartContractDetails,showError:this.showError}):""),d.a.createElement("div",{className:"p-col-7"},this.state.smartContractAddress?d.a.createElement(z,{smartContractAddress:this.state.smartContractAddress,showError:this.showError,web3:this.props.web3}):d.a.createElement(d.a.Fragment,null)))}}]),a}(m.Component);t.default=F}}]);
//# sourceMappingURL=9.9fdc4c02.chunk.js.map